<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>LRU Cache - Tyler Jones</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">
        <link rel="stylesheet" href="../././mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">Introduction</a></li><li class="chapter-item "><a href="../life-hacks/index.html">Life Hacks</a></li><li class="chapter-item "><a href="../local-setup/index.html">Local Setup</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../local-setup/brew-tools.html">Brew Tools</a></li><li class="chapter-item "><a href="../local-setup/apps.html">Mac apps</a></li><li class="chapter-item "><a href="../local-setup/fish-alias.html">Fish Alias</a></li><li class="chapter-item "><a href="../local-setup/fish-functions.html">Fish Functions</a></li><li class="chapter-item "><a href="../local-setup/shell.html">Shell</a></li></ol></li><li class="chapter-item "><a href="../tool-tips/index.html">Dev Tooling</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../tool-tips/make.html">make</a></li></ol></li><li class="chapter-item "><a href="../design-patterns/index.html">Design Patterns</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../design-patterns/factory.html">factory</a></li><li class="chapter-item "><a href="../design-patterns/observer.html">observer</a></li><li class="chapter-item "><a href="../design-patterns/plugin.html">plugin</a></li><li class="chapter-item "><a href="../design-patterns/strategy.html">strategy</a></li><li class="chapter-item "><a href="../design-patterns/actor.html">actor</a></li></ol></li><li class="chapter-item expanded "><a href="../algorithms/index.html">Algorithms</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../algorithms/0-1-knapsack.html">0-1 Knapsack</a></li><li class="chapter-item expanded "><a href="../algorithms/LRU-doublelink.html" class="active">LRU Cache</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="least-recently-used-lru-cache"><a class="header" href="#least-recently-used-lru-cache">Least Recently Used (LRU) Cache</a></h1>
<p>This LRU implementation is based on a double linked list. The list is used to keep track of the order in which the items are used. The list is ordered from most recently used to least recently used. The head of the list is the most recently used item, and the tail of the list is the least recently used item. It does not consider the size of the cached value when determining which item to evict.</p>
<pre><code class="language-javascript">class LRUCache {
    constructor(capacity) {
        this.capacity = capacity
        this.cache = new Map()
        this.tail = Node()
        this.head = Node()

        class Node {
            constructor(key, value) {
                this.key = key
                this.value = value
                this.next = null
                this.prev = null
            }
        }

        this.get = function (key) {
            if (this.cache.has(key)) {
                let node = this.cache.get(key)
                this._moveToHead(key)
                return node.value
            }
            return undefined
        }
        this._add = function (node) {
            node.prev = this.head
            node.next = this.head.next
            this.head.next.prev = node
            this.head.next = node
        }
        this._remove = function (node) {
            node.prev.next = node.next
            node.next.prev = node.prev
        }
        this._moveToHead = function (node) {
            this._remove(node)
            this._add(node)
        }
        this.put = function (key, value) {
            if (this.cache.has(key)) {
                let node = this.cache.get(key)
                node.value = value
                this._moveToHead(node)
            }
            var node = new Node(key, value)
            this.cache.put(key, node)
            this._add(node)

            // cleanup
            if (this.cache.size &gt; this.capacity) {
                let node = this.tail.prev
                this.cache.delete(node.key)
                this._remove(node)
            }
        }
    }
}
</code></pre>

                    </main>
                </div>
            </div>
        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>